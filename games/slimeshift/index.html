<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Slime Shift</title>
  <link rel="stylesheet" href="style.css">
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;700&display=swap" rel="stylesheet">
</head>
<body>
  <div class="container">
    <div class="logo">
      <img src="images/Logo.png" alt="Slime Shift Logo">
    </div>

  <div class="progress-container">
    <div class="progress-bar">
      <span class="progress-text"></span>
    </div>
  </div>

    <!-- I don't  have screenshots yet :p

    <section class="screenshots">
      <img src="images/screenshot1.png" alt="Slime Shift Screenshot 1">
      <img src="images/screenshot2.png" alt="Slime Shift  Screenshot 2">
      <img src="images/screenshot3.png" alt="Slime Shift  Screenshot 3">
    </section>

    -->

    <div class="lightbox" id="lightbox">
      <span class="close">&times;</span>
      <img class="lightbox-img" id="lightbox-img" src="" alt="Expanded Screenshot">
      <div class="arrow left" id="prev">&#10094;</div>
      <div class="arrow right" id="next">&#10095;</div>
    </div>
    
    <section class="notes">
      <h2>Notes</h2>
      <p>
        Ah, my passion project. I started working on this game back in September of 2022. It has morphed into it's current state since then and I am ever so proud of it.
        It started production as a game called "Magic Mages", where you were wizards instead of Slimes. It was then changed to a combat game called "Slim Gam", created in Unity.
        It is now being officially called "Slime Shift", and is created in GameMaker Studio 2.
      </p>
    </section>

    <section class="description">
      <h2>Description</h2>
      <p>
        Slime Shift is a puzzle platformer game. Currently there's only a demo featuring a tutorial and a single stage. More stages and mechanics are in the works. 
        Many more features and levels are soon to come.
      </p>
    </section>

    <!-- I plan on adding more versions later, this is just cleaning up my mess. -->
    <section class="download">
      <a href="versions/slimeshift.zip" download>Download Slime Shift (DEMO)</a>
    </section>

  </div>
  <script>
    document.addEventListener('DOMContentLoaded', () => {
    
    // For images when I have them
    const images = document.querySelectorAll('.screenshots img');
    const lightbox = document.getElementById('lightbox');
    const lightboxImg = document.getElementById('lightbox-img');
    const closeBtn = document.querySelector('.lightbox .close');
    const prevBtn = document.getElementById('prev');
    const nextBtn = document.getElementById('next');
    let currentIndex = 0;

    images.forEach((img, index) => {
        img.addEventListener('click', () => {
        currentIndex = index;
        showLightbox();
        });
    });

    function showLightbox() {
        lightbox.style.display = 'flex';
        lightboxImg.src = images[currentIndex].src;
    }

    function closeLightbox() {
        lightbox.style.display = 'none';
    }

    function showNext() {
        currentIndex = (currentIndex + 1) % images.length;
        showLightbox();
    }

    function showPrev() {
        currentIndex = (currentIndex - 1 + images.length) % images.length;
        showLightbox();
    }

    closeBtn.addEventListener('click', closeLightbox);
    nextBtn.addEventListener('click', showNext);
    prevBtn.addEventListener('click', showPrev);

    window.addEventListener('keydown', (e) => {
        if (lightbox.style.display === 'flex') {
        if (e.key === 'Escape') closeLightbox();
        if (e.key === 'ArrowRight') showNext();
        if (e.key === 'ArrowLeft') showPrev();
        }
    });

    lightbox.addEventListener('click', (e) => {
        if (e.target === lightbox) closeLightbox();
    });

    // Progress Bar!
      const progressBar = document.querySelector('.progress-bar');
      const progressText = document.querySelector('.progress-text');

      // Get width percentage from the inline style
      const computedWidth = window.getComputedStyle(progressBar).width;
      const containerWidth = window.getComputedStyle(document.querySelector('.progress-container')).width;

      // Convert both to numbers
      const widthPercent = Math.round(
        (parseFloat(computedWidth) / parseFloat(containerWidth)) * 100
      );

      progressText.textContent = `${widthPercent}%`;
    });
    </script>

</body>
</html>